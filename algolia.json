[
    {
        "title": "Hello",
        "uri": "hello",
        "content": "Hello World",
        "objectID": "hello",
        "date": "2019-09-26T06:16:34.000Z",
        "description": "",
        "draft": false,
        "tags": [
            "hello"
        ],
        "categories": [
            "hello"
        ]
    },
    {
        "title": "kubeadm 安装单master集群",
        "uri": "posts/kubeadm 安装单master集群",
        "content": "kubernetes version  v1 16 3                                                                Centos   7 7            kubeadm   v1 16 3              etcd   3 3 15             calico   v3 14 0   CNI          docker   18 09 9   CRI Runtime     metallb   v0 8 3       LoadBalancer          hostname   IP Address   components                                                                                                                        k8s master   10 64 144 100   kube apiserver kube controller manager kube scheduler etcd kubelet flannel docker     k8s node01   10 64 144 101   kube proxy kubelet flannel docker     k8s node02   10 64 144 102   kube proxy kubelet flannel docker     k8s node03   10 64 144 103   kube proxy kubelet flannel docker     k8s node04   10 64 144 104   kube proxy kubelet flannel docker     k8s node05   10 64 144 105   kube proxy kubelet flannel docker     k8s node06   10 64 144 106   kube proxy kubelet flannel docker                                                                     Pod      172 16 0 0 16     Service      10 96 0 0 12     DNS      10 96 0 10     LoadBalance   10 64 144 150 10 64 144 200                         hosts      cat    etc hosts 0                0    5 6 13           grub2 set default 0   grub2 mkconfig  o  boot grub2 grub cfg Generating grub configuration file     Found linux image   boot vmlinuz 5 6 13 1 el7 elrepo x86_64 Found initrd image   boot initramfs 5 6 13 1 el7 elrepo x86_64 img Found linux image   boot vmlinuz 3 10 0 1062 4 1 el7 x86_64 Found initrd image   boot initramfs 3 10 0 1062 4 1 el7 x86_64 img Found linux image   boot vmlinuz 3 10 0 957 el7 x86_64 Found initrd image   boot initramfs 3 10 0 957 el7 x86_64 img Found linux image   boot vmlinuz 0 rescue 4097349c950a4862a8fab2587d598af7 Found initrd image   boot initramfs 0 rescue 4097349c950a4862a8fab2587d598af7 img done                 PC              kmod r8168  kmod r8169             uname  r 5 6 13 1 el7 elrepo x86_64    SELinux       selinux         Permission deined    sed  i  s SELINUX enforcing SELINUX disabled g   etc selinux config        setenforce 0           swap swapoff  a sed  i  r  s     swap        1    etc fstab sysctl  w vm swappiness 0 cat    etc sysctl d swap conf  etc sysctl d k8s conf          4 19      nfconntrack     nfconntrack_ipv4      modprobe    ip_vs modprobe    ipvsrr modprobe    ipvswrr modprobe    ipvssh modprobe    nf_conntrack        cat    etc sysconfig modules ipvs modules  dev null 2  1       eq 0    sbin modprobe   mod  fi done EOF chmod  x  etc sysconfig modules ipvs modules                lsmod   grep ip_vs ipvssh 12688 0 ipvswrr 12697 0 ipvsrr 12600 4 ipvs 145497 10 ipvsrr ipvssh ipvs_wrr nfconntrack 139224 7 ipvs nfnat nfnatipv4 xtconntrack nfnatmasqueradeipv4 nfconntracknetlink nfconntrack libcrc32c 12644 4 xfs ipvs nfnat nf_conntrack                      chrony           ln  sf  usr share zoneinfo Asia Shanghai  etc localtime   echo  Asia Shanghai     etc timezone   yum install chrony  y   cat    etc chrony conf       curl  fsSL https   raw githubusercontent com moby moby master contrib check config sh   bash  s info  reading kernel config  boot config 3 10 0 1062 4 3 el7 x86_64     Generally Necessary      Optional Features  CONFIGUSERNS  enabled  RHEL7 CentOS7  User namespaces disabled  add  user_namespace enable 1  boot command line  CONFIG_SECCOMP  enabled                     user_namespace   grubby   args  user_namespace enable 1    update kernel    grubby   default kernel     grep user_namespace  etc grub2 cfg linux16  vmlinuz 5 6 13 1 el7 elrepo x8664 root  dev mapper centos root ro crashkernel auto rd lvm lv centos root rhgb quiet usernamespace enable 1                 systemctl reboot    Docker                Kubernetes              Docker  Containerd  CRI O       Docker                       Container Runntimes     Docker           CHANGELOG    list validated docker versions               18 06 2          18 09 9 Docker     yum                          yum install  y yum utils device mapper persistent data lvm2 export VERSION 18 09 curl  fsSL https   get docker com   bash  s docker   mirror Aliyun                    native cgroupdriver         systemd     cgroup      kubelet    cgroup driver     storage driver       overlay2                    XFS    ftype 1     xfsinfo        docker           Error starting daemon  error initializing graphdriver  overlay2  backing xfs filesystem formatted without dtype support  leads incorrect behavior  Reformat filesystem ftype 1 enable dtype support  Backing filesystems without dtype support not supported  registry mirrors      dockerhub      mkdir  etc docker cat    etc docker daemon json               YUM                       cat    etc yum repos d kubernetes repo      1 16 3    worker         kubectl yum install kubeadm 1 16 3 kubectl 1 16 3 kubelet 1 16 3  y    kubelet         systemctl enable   now kubelet Created symlink  etc systemd system multi user target wants kubelet service  usr lib systemd system kubelet service    systemctl status kubelet   kubelet service   kubelet  Kubernetes Node Agent Loaded  loaded   ",
        "objectID": "posts/kubeadm 安装单master集群",
        "date": "2019-11-18T11:12:02.000Z",
        "description": "",
        "draft": false,
        "tags": [
            "kubernetes"
        ],
        "categories": [
            "kubernetes"
        ]
    },
    {
        "title": "使用Kubeadm更新集群",
        "uri": "posts/kubeadm更新集群",
        "content": "kubeadm                  v1 16 3           1 18 x                  k8s                         1 18 x        1 17 x               Upgrading kubeadm clusters                    1 17 5            yum list   showduplicates kubeadm   disableexcludes kubernetes   grep 1 17 kubeadm x86_64 1 17 0 0 kubernetes kubeadm x86_64 1 17 1 0 kubernetes kubeadm x86_64 1 17 2 0 kubernetes kubeadm x86_64 1 17 3 0 kubernetes kubeadm x86_64 1 17 4 0 kubernetes kubeadm x86_64 1 17 5 0 kubernetes    master    1 17 5    kubeadm   yum install  y kubeadm 1 17 5 0   disableexcludes kubernetes   kubeadm version kubeadm version   version Info Major  1   Minor  17   GitVersion  v1 17 5   GitCommit  e0fccafd69541e3750d460ba0f9743b90336f24f   GitTreeState  clean   BuildDate  2020 04 16T11 41 38Z   GoVersion  go1 13 9   Compiler  gc   Platform  linux amd64     master             pod   kubectl drain k8s master   ignore daemonsets   delete local data node k8s master already cordoned node k8s master evicted          kubeadm upgrade plan  upgrade config  Making sure configuration correct   upgrade config  Reading configuration cluster     upgrade config  FYI  look config file  kubectl  n kube system cm kubeadm config  oyaml   preflight  Running pre flight checks   preflight  fatal errors occurred   ERROR CoreDNSUnsupportedPlugins   unsupported plugins CoreDNS Corefile  preflight  know doing  check non fatal   ignore preflight errors     stack trace error execute   v 5 higher           ERROR CoreDNSUnsupportedPlugins   unsupported plugins CoreDNS Corefile          CoreDNS                        ignore preflight errors CoreDNSUnsupportedPlugins   github      issue   kubectl configmap  n kube system coredns  oyaml              kubeadm upgrade plan   ignore preflight errors CoreDNSUnsupportedPlugins  upgrade config  Making sure configuration correct   upgrade config  Reading configuration cluster     upgrade config  FYI  look config file  kubectl  n kube system cm kubeadm config  oyaml   preflight  Running pre flight checks   WARNING CoreDNSUnsupportedPlugins   unsupported plugins CoreDNS Corefile  upgrade  Making sure cluster healthy   upgrade  Fetching available versions upgrade  upgrade versions  Cluster version  v1 16 3  upgrade versions  kubeadm version  v1 17 5 I0520 19 40 07 623240 6896 version go 251  remote version newer  v1 18 2  falling back to  stable 1 17  upgrade versions  Latest stable version  v1 17 5  upgrade versions  Latest version v1 16 series  v1 16 9 Components upgraded manually upgraded control plane  kubeadm upgrade apply   COMPONENT CURRENT AVAILABLE Kubelet 6 x v1 16 3 v1 16 9 Upgrade latest version v1 16 series  COMPONENT CURRENT AVAILABLE API Server v1 16 3 v1 16 9 Controller Manager v1 16 3 v1 16 9 Scheduler v1 16 3 v1 16 9 Kube Proxy v1 16 3 v1 16 9 CoreDNS 1 6 2 1 6 5 Etcd 3 3 15 3 3 17 0 apply upgrade executing following command  kubeadm upgrade apply v1 16 9 Components upgraded manually upgraded control plane  kubeadm upgrade apply   COMPONENT CURRENT AVAILABLE Kubelet 6 x v1 16 3 v1 17 5 Upgrade latest stable version  COMPONENT CURRENT AVAILABLE API Server v1 16 3 v1 17 5 Controller Manager v1 16 3 v1 17 5 Scheduler v1 16 3 v1 17 5 Kube Proxy v1 16 3 v1 17 5 CoreDNS 1 6 2 1 6 5 Etcd 3 3 15 3 4 3 0 apply upgrade executing following command  kubeadm upgrade apply v1 17 5        kubeadm upgrade apply v1 17 5   ignore preflight errors CoreDNSUnsupportedPlugins  upgrade config  Making sure configuration correct   upgrade config  Reading configuration cluster     upgrade config  FYI  look config file  kubectl  n kube system cm kubeadm config  oyaml   preflight  Running pre flight checks   WARNING CoreDNSUnsupportedPlugins   unsupported plugins CoreDNS Corefile  upgrade  Making sure cluster healthy   upgrade version  chosen change cluster version  v1 17 5   upgrade versions  Cluster version  v1 16 3  upgrade versions  kubeadm version  v1 17 5  upgrade confirm  sure want proceed upgrade   y N   y  upgrade prepull  Will prepull images components  kube apiserver kube controller manager kube scheduler etcd   upgrade prepull  Prepulling image component kube apiserver   upgrade prepull  Prepulling image component kube controller manager   upgrade prepull  Prepulling image component etcd   upgrade prepull  Prepulling image component kube scheduler   apiclient  Found 1 Pods label selector k8s app upgrade prepull kube controller manager  apiclient  Found 0 Pods label selector k8s app upgrade prepull kube scheduler  apiclient  Found 0 Pods label selector k8s app upgrade prepull etcd  apiclient  Found 1 Pods label selector k8s app upgrade prepull kube apiserver  apiclient  Found 1 Pods label selector k8s app upgrade prepull kube scheduler  apiclient  Found 1 Pods label selector k8s app upgrade prepull etcd  upgrade prepull  Prepulled image component kube apiserver   upgrade prepull  Prepulled image component kube controller manager   upgrade prepull  Prepulled image component etcd   upgrade prepull  Prepulled image component kube scheduler   upgrade prepull  Successfully prepulled images control plane components  upgrade apply  Upgrading Static Pod ",
        "objectID": "posts/kubeadm更新集群",
        "date": "2020-05-20T11:17:26.000Z",
        "description": "",
        "draft": false,
        "tags": [
            "kubernetes",
            "kubeadm"
        ],
        "categories": [
            "kubernetes"
        ]
    }
]